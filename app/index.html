<!doctype html>
<html class="no-js">

<head>
  <meta charset="utf-8">
  <title>DragAndDropBlocks</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">
  <link rel="shortcut icon" href="/favicon.ico">
  <!-- like in apex-->
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- build:css styles/vendor.css -->
  <link rel="stylesheet" href="bower_components/jquery-ui/themes/base/jquery-ui.css">
  <!-- bower:css -->
  <!-- endbower -->
  <!-- endbuild -->
  <!-- build:css(.tmp) styles/main.css -->
  <link rel="stylesheet" href="styles/main.css">
  <!-- endbuild -->
  <style>
    div#dadb1 div.DadbStepContent {
      background: #ffd6b8;
    }

    div#dadb1 .DadbStepHalfHour {
      border-left: 1px solid #ffd6b8;
    }

    div#dadb1 .DadbStepQuarter {
      border-left: 1px solid #ffd6b8;
    }

    div#dadb1 .DadbPlannedBlockBody {
      border-left: 1px solid #ff8229;
    }

    div#dadb3 div.DadbStepContent {
      background: #e6f7fd;
    }

    div#dadb3 .DadbStepHalfHour {
      border-left: 1px solid #e6f7fd;
    }

    div#dadb3 .DadbStepQuarter {
      border-left: 1px solid #e6f7fd;
    }

    div#dadb3 .DadbPlannedBlockBody {
      border-left: 1px solid #00abe8;
    }
  </style>
</head>

<body>
  <a href="javascript:addNew();">test</a>
  <div id="root_parent" class="DadbContent">

    <div id="models" style="overflow: auto; width: 1200px; margin-right: 20px; padding-top: 20px;">

      <div id="dadb1" style="margin-left: 10px;"></div>
      <div id="dadb3" style="margin-left: 10px;"></div>

    </div>
    <br>
    <br>

    <fieldset style="width: 30%; float: left; height: 80px;">
      <legend>tolbar1:</legend>
      <div id="tolbar1"></div>
    </fieldset>
    <fieldset style="width: 30%; float: left; height: 80px;">
      <legend>tolbar2:</legend>
      <div id="tolbar2"></div>
    </fieldset>
    <!--fieldset style="width: 15%; float: left; height: 80px;">
      <legend>tolbar3:</legend>
      <div id="tolbar3">
      </div>
    </fieldset-->
  </div>



  <!-- build:js({app,.tmp}) scripts/vendor.js -->
  <!-- bower:js -->
  <script src="bower_components/jquery/jquery.js"></script>
  <script src="bower_components/jquery-ui/ui/jquery-ui.js"></script>
  <!-- endbower -->
  <!-- endbuild -->
  <!-- build:js({app,.tmp}) scripts/main.js -->
  <script src="scripts/main.js"></script>
  <!-- endbuild -->
  <script>
    var dadb1;
    var dadb2;
    var dadb3;
    var blocksToolbar = [{
      'code': 'K15',
      'value': 15,
      'blockId': 1,
      'attributes': [{
        'COL_Toolbar': '#00-abe8'
      }, {
        'COL_Planned': '#ff7c34'
      }, {
        'COL_Unplanned': 'white'
      }, {
        'COL_Real': '#7bce5b'
      }, {
        'COL_Unreal': 'white'
      }, {
        'COL_Added': '#3c8a27'
      }, {
        'COL_Deleted': '#ff3d25'
      }]
    }, {
      'code': 'K30',
      'value': 30,
      'blockId': 1,
      'attributes': [{
        'COL_Toolbar': '#00abe8'
      }, {
        'COL_Planned': '#ff7c34'
      }, {
        'COL_Unplanned': 'white'
      }, {
        'COL_Real': '#7bce5b'
      }, {
        'COL_Unreal': 'white'
      }, {
        'COL_Added': '#3c8a27'
      }, {
        'COL_Deleted': '#ff3d25'
      }]
    }, {
      'code': 'K60',
      'value': 60,
      'blockId': 1,
      'attributes': [{
        'COL_Toolbar': '#00abe8'
      }, {
        'COL_Planned': '#ff7c34'
      }, {
        'COL_Unplanned': 'white'
      }, {
        'COL_Real': '#7bce5b'
      }, {
        'COL_Unreal': 'white'
      }, {
        'COL_Added': '#3c8a27'
      }, {
        'COL_Deleted': '#ff3d25'
      }]
    }, {
      'code': 'K120',
      'value': 120,
      'blockId': 1,
      'attributes': [{
        'COL_Toolbar': '#00abe8'
      }, {
        'COL_Planned': '#ff7c34'
      }, {
        'COL_Unplanned': 'white'
      }, {
        'COL_Real': '#7bce5b'
      }, {
        'COL_Unreal': 'white'
      }, {
        'COL_Added': '#3c8a27'
      }, {
        'COL_Deleted': '#ff3d25'
      }]
    }];
    $(function() {
      // inicialization - test from APEX (string insted of objects)
      dadb1 = new Dadb('dadb1', '{"min":0,"max":1440,"step":15,"toolbarId":"tolbar1", "openBlocks":[[420,715,1]],"attToolbarId":"tolbar3"}');
      dadb1.addBlocks('[{"blockId":"123", "start":420, "value":60, "rangeId":"100", "backgroundColor":"#ff7c34"}]');


      dadb3 = new Dadb('dadb3', '{"min":0,"max":1440,"step":15,"toolbarId":"tolbar2", "openBlocks":[[420,715,2]], "blocksToolbar":' + JSON.stringify(blocksToolbar) + '}');
      //dadb3.addBlocks('[{"blockId":"333", "start":720, "value":15,"rangeId":"210", "backgroundColor":"#ff7c34"}]');
    });
    var id = 5;

    function addNew() {
      var curId = 'dadb' + id++;
      var models = $('#models');
      var model = $('<div/>', {
        'id': curId,
        'style': 'margin-left: 10px',
      }).appendTo(models);

      var theInstructions = curId +'= new Dadb("'+curId+'",\'{"min":0,"max":1440,"step":15,"toolbarId":"tolbar1", "openBlocks":[[420,715,1]],"attToolbarId":"tolbar3"}\');';
      var f = new Function(theInstructions);
      return (f());
    }

  </script>

</body>

</html>
